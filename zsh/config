ZDOTDIR="/home/badboy/.zsh"
MY_ZDOTDIR="/home/badboy/projects/zsh-config"
export MY_ZDOTDIR

autoload colors
colors
setopt correct_all

# push cds to directory stack
setopt auto_pushd

# don't push something twice
setopt pushd_ignore_dups

# don't kill jobs when exiting shell 
setopt no_hup
# and don't warn
setopt no_check_jobs

# show us when some command didn't exit with 0
#setopt print_exit_value

export OOO_FORCE_DESKTOP=gnome

if [[ -n "$DISPLAY" ]] ; then
    export BROWSER=firefox
else
    export BROWSER=w3m
fi

# extended to use ruby 1.8 gems with "18" suffix
export PATH=${HOME}/bin:${PATH}:${HOME}/.gem/ruby/1.8/bin
export EDITOR=vim
export VISUAL=$EDITOR
export LESSCHARSET="UTF-8"
#export LESSOPEN='|/usr/bin/lesspipe.sh %s 2>&-'
#export LESS='-F -i -n -w -g -M -R -P%t?f%f \
#:stdin .?pb%pb\%:?lbLine %lb:?bbByte %bb:-...'

rationalise-dot() {
    if [[ $LBUFFER = *.. ]]; then
        LBUFFER+=/..
    else
        LBUFFER+=.
    fi
}
zle -N rationalise-dot
bindkey . rationalise-dot

# load my defined functions
for file in $MY_ZDOTDIR/zsh/functions.d/*
do
    source $file
done

. $MY_ZDOTDIR/zsh/aliases
. $MY_ZDOTDIR/zsh/completion
. $MY_ZDOTDIR/zsh/keybindings
. $MY_ZDOTDIR/zsh/prompt
. $MY_ZDOTDIR/zsh/diraliases


# execute after each cd
chpwd() { ls }

# try to execute the right thing for unknown input
# for example it clones git urls
function command_not_found_handler() {
  ~/bin/shell_method_missing $*
}

#if [[ -z "$DISPLAY" && -z "$SSH_TTY" && $(tty) = /dev/tty1 ]]; then
#    SERVER_ARGS=":0 -nolisten tcp vt7"
#
#    # Drop root to console
#    if [[ $EUID -eq 0 ]]; then
#        exec ${SHELL}
#    fi
#    startx -- $SERVER_ARGS &
#    logout
#fi

# using rvm
if [[ -s /home/badboy/.rvm/scripts/rvm ]] ; then source /home/badboy/.rvm/scripts/rvm ; fi

# to access github's code directly
function cg() {
    local dir=$(cg.rb $*)
    cd $dir
}

# vim:filetype=zsh foldmethod=marker autoindent expandtab shiftwidth=4
